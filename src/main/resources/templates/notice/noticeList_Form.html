<html layout:decorate="~{layout}">
<div layout:fragment="content" class="container my-3">
  <h5 class="my-3 border-bottom pb-2">공지사항</h5>
  <table class="table table-danger">
    <thead class="table-danger">
    <tr>
      <th>번호</th>
      <th>제목</th>
      <th>작성일</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="notice, loop : ${noticePage}">
      <!-- 페이지 번호 -->
      <td class="table-light" th:text="${noticePage.getTotalElements() - (noticePage.getNumber() * noticePage.getSize()) - loop.index}"></td>
      <!-- 공지사항 제목 -->
      <td class="table-light">
        <a href="/notice/detail/${notice.notiNo}" th:href="@{|/notice/detail/${notice.notiNo}|}" th:text="${notice.notiTitle}"></a>
      </td>
      <!-- 공지사항 작성일 -> 수정하면 날짜 변경. -->
      <td class="table-light" th:text="${#temporals.format(notice.notiDate,'yyyy-MM-dd')}"></td>
    </tr><!-- 1페이지당 출력할 게시물수만큼 반복끝 -->
    </tbody>
  </table>
  <!-- 공지사항 등록하기 -->
  <div sec:authorize="hasRole('ROLE_ADMIN')" class="text-end ms-auto">
    <a th:href="@{/notice/add}" class="btn btn-outline-danger">작성하기</a>
  </div>
  <!-- Pagination 부분 영역 시작 -->
  <div th:if="${noticePage != null && !noticePage.isEmpty()}">
    <ul class="pagination justify-content-center">
      <!-- 이전 버튼 -->
      <li class="page-item" th:classappend="${!noticePage.hasPrevious()} ? 'disabled'">
        <a class="page-link" th:href="@{|?page=${noticePage.getNumber() - 1}|}"><span>이전</span></a>
      </li>
      <!-- 페이지 번호: 반복 + 연결 + bootstrap [0] [1] [2] [3~] [4] [5] [6] [7]~~[9] [10] [11] -->
      <li class="page-item" th:each="page : ${#numbers.sequence(0, noticePage.getTotalPages() - 1)}"
          th:if="${page >= noticePage.getNumber() - 3 and page <= noticePage.getNumber() + 3}" th:classappend="${page == noticePage.getNumber()} ? 'active'">
        <a class="page-link" th:href="@{|?page=${page}|}" th:text="${page + 1}"></a>
      </li>
      <!-- 다음 버튼 -->
      <li class="page-item" th:classappend="${!noticePage.hasNext()} ? 'disabled'">
        <a class="page-link" th:href="@{|?page=${noticePage.getNumber() + 1}|}"><span>다음</span></a>
      </li>
    </ul>
  </div><!-- Pagination 부분 영역 끝 -->
</div>
</html>


<!--
<html layout:decorate="~{layout}">
<div layout:fragment="content" class="container my-3">
  <h5 class="my-3 border-bottom pb-2">공지사항</h5>
  <table class="custom-table-danger">
    <tr class="table-danger">
        <th>번호</th>
        <th>제목</th>
        <th>작성일</th>
    </tr>
    <tbody>
    <tr th:each="notice, loop : ${noticePage}">
      &lt;!&ndash; 페이지 번호 &ndash;&gt;
      <td class="table-danger" th:text="${noticePage.getTotalElements - (noticePage.number * noticePage.size) - loop.index}"></td>
      &lt;!&ndash; 공지사항 제목 &ndash;&gt;
      <td class="table-danger">
          <a href="/notice/detail/${notice.notiNo}" th:href="@{|/notice/detail/${notice.notiNo}|}" th:text="${notice.notiTitle}"></a>
      </td>
        &lt;!&ndash; 공지사항 작성일 -> 수정하면 날짜 변경. &ndash;&gt;
      <td class="table-danger" th:text="${#temporals.format(notice.notiDate,'yyyy-MM-dd')}"></td>
    </tr>&lt;!&ndash;1페이지당 출력할 게시물수만큼 반복끝&ndash;&gt;
    </tbody>
  </table>
  &lt;!&ndash; 공지사항 등록하기 &ndash;&gt;
  <div sec:authorize="hasRole('ROLE_ADMIN')">
    <a th:href="@{/notice/add}" class="btn btn-outline-danger">공지사항작성하기</a>
  </div>
  &lt;!&ndash; Pagenation 부분 영역 시작&ndash;&gt;
    <div th:if="${noticePage != null && !noticePage.isEmpty()}">
    <ul class="pagination justify-content-center">
      &lt;!&ndash; 이전버튼 &ndash;&gt;
      <li class="page-item"
          th:classappend="${!noticePage.hasPrevious} ? 'disabled'">
        <a class="page-link"
           th:href="@{|?page=${noticePage.number-1}|}"><span>이전</span></a>
      </li>
      &lt;!&ndash; 페이지번호:반복+연결+bootstrap [0] [1] [2] [3~]  [4] [5] [6] [7]~~[9] [10] [11]  &ndash;&gt;
      <li class="page-item"
          th:each="page : ${#numbers.sequence(0,noticePage.totalPages-1)}"
          th:if="${  page>=noticePage.number-3 and  page<=noticePage.number+3 }"
          th:classappend="${page==noticePage.number} ? 'active'">
        <a class="page-link"
           th:href="@{|?page=${page}|}"
           th:text="${page+1}"></a>
      </li>
      &lt;!&ndash; 다음버튼 &ndash;&gt;
      <li class="page-item"
          th:classappend="${!noticePage.hasNext} ? 'disabled'">
        <a class="page-link"
           th:href="@{|?page=${noticePage.number+1}|}"><span>다음</span></a>
      </li>
    </ul>
  </div>&lt;!&ndash; Pagenation 부분 영역 끝&ndash;&gt;
</div>
</html>-->
